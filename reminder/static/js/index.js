const svg = document.querySelector('svg')
const from = [
  "m 64.571068,55.499996 c 0,4.142136 -1.678932,7.892136 -4.393398,10.606602 -2.714466,2.714466 -6.464466,4.393398 -10.606602,4.393398 -4.142136,0 -7.892136,-1.678932 -10.606602,-4.393398 -2.714466,-2.714466 -4.393398,-6.464466 -4.393398,-10.606602 0,-4.142136 2.562815,-11.642136 4.393398,-14.356602 2.146369,-3.182727 6.464466,-12.143398 10.606602,-12.143398 4.142136,0 8.460233,8.960671 10.606602,12.143398 1.830583,2.714466 4.393398,10.214466 4.393398,14.356602 z",
  "m 58.560284,63.063767 c -2.375831,3.393039 -5.902044,5.501863 -9.682558,6.16847 -3.780514,0.666607 -7.81533,-0.109004 -11.208369,-2.484836 -3.393039,-2.375832 -5.501864,-5.902044 -6.16847,-9.682558 -0.666607,-3.780514 0.109004,-7.81533 2.484836,-11.208369 2.375831,-3.393039 8.77699,-8.06671 11.833469,-9.240291 3.58374,-1.37603 12.260548,-6.239424 15.653587,-3.863592 3.393039,2.375832 1.790587,12.192742 1.723253,16.030986 -0.05743,3.27354 -2.259916,10.887151 -4.635748,14.28019 z",
  "m 65.156413,45.856474 c 2.375832,3.393039 3.151443,7.427855 2.484836,11.208369 -0.666606,3.780514 -2.775431,7.306726 -6.16847,9.682558 -3.393039,2.375832 -7.427855,3.151443 -11.208369,2.484836 -3.780514,-0.666607 -7.306727,-2.775431 -9.682558,-6.16847 -2.375832,-3.393039 -4.57832,-11.00665 -4.635748,-14.28019 -0.06733,-3.838244 -1.669786,-13.655154 1.723253,-16.030986 3.393039,-2.375832 12.069847,2.487562 15.653587,3.863592 3.056479,1.173581 9.457638,5.847252 11.833469,9.240291 z",
  "m 72.5,50 c 0,6.213203 -2.518398,11.838203 -6.590097,15.909903 -4.0717,4.071699 -9.6967,6.590097 -15.909903,6.590097 -6.213203,0 -11.838203,-2.518398 -15.909903,-6.590097 -4.071699,-4.0717 -6.590097,-9.6967 -6.590097,-15.909903 0,-6.213203 2.518398,-11.838203 6.590097,-15.909903 4.0717,-4.071699 9.6967,-6.590097 15.909903,-6.590097 6.213203,0 11.838203,2.518398 15.909903,6.590097 4.071699,4.0717 6.590097,9.6967 6.590097,15.909903 z"
]
const to = [
  "m 61.250001,65 c 0,3.106602 -1.259199,5.919102 -3.295049,7.954951 -2.035849,2.03585 -4.848349,3.295049 -7.954951,3.295049 -3.106602,0 -5.919102,-1.259199 -7.954952,-3.295049 -2.03585,-2.035849 -3.295049,-4.848349 -3.295049,-7.954951 0,-3.106602 1.259199,-5.919102 3.295049,-7.954952 2.03585,-2.035849 4.84835,-3.295048 7.954952,-3.295048 3.106602,0 5.919102,1.259199 7.954951,3.295048 2.03585,2.035851 3.295049,4.84835 3.295049,7.954952 z",
  "m 28.494665,70.625 c -1.553301,2.690396 -4.05005,4.496493 -6.831072,5.241666 -2.781022,0.745172 -5.846318,0.429421 -8.536714,-1.12388 -2.690397,-1.553301 -4.4964932,-4.05005 -5.2416662,-6.831072 -0.7451725,-2.781022 -0.4294211,-5.846318 1.12388,-8.536714 1.5533012,-2.690396 4.0500492,-4.496493 6.8310722,-5.241666 2.781022,-0.745172 5.846318,-0.429421 8.536714,1.12388 2.690396,1.553301 4.496493,4.05005 5.241666,6.831071 0.745172,2.781023 0.429421,5.846319 -1.12388,8.536715 z",
  "m 90.994666,59.375 c 1.553301,2.690396 1.869052,5.755693 1.12388,8.536714 -0.745173,2.781023 -2.55127,5.277771 -5.241666,6.831072 -2.690396,1.553301 -5.755692,1.869052 -8.536715,1.12388 -2.781022,-0.745172 -5.277771,-2.551269 -6.831072,-5.241665 -1.553301,-2.690396 -1.869053,-5.755693 -1.123879,-8.536716 0.745173,-2.781022 2.55127,-5.27777 5.241666,-6.831071 2.690396,-1.553301 5.755692,-1.869052 8.536714,-1.12388 2.781023,0.745173 5.277771,2.55127 6.831072,5.241666 z",
  "m 61.25,33.75 c 0,3.106602 -1.259199,5.919102 -3.295049,7.954951 -2.035849,2.03585 -4.848349,3.295049 -7.954951,3.295049 -3.106602,0 -5.919102,-1.259199 -7.954952,-3.295049 -2.035849,-2.035849 -3.295048,-4.848349 -3.295048,-7.954951 0,-3.106602 1.259199,-5.919102 3.295048,-7.954952 2.03585,-2.035849 4.84835,-3.295048 7.954952,-3.295048 3.106602,0 5.919102,1.259199 7.954951,3.295048 2.03585,2.03585 3.295049,4.84835 3.295049,7.954952 z"
];
const pathsShadow = Array.from(document.querySelectorAll('.shadow path')),
      paths = Array.from(document.querySelectorAll('.paths path')),
      icons = Array.from(document.querySelectorAll('.icon')),
      button = document.querySelector('.button-main'),
      anims = [];
let expanded = false;

icons.forEach((icon) => {
  icon.style.transform = 'scale(0)';
})

function animate(values, expand) {
  anims.forEach((anim) => {
    anim.pause();
  });
  anims.length = 0;

  const easing = expand ? 'easeInQuad' : 'easeOutQuad';
  let anim = null;
  // Buttons
  pathsShadow.forEach((path, i) => {
    anim = anime({
      targets: path,
      d: {
        value: values[i],
        duration: 600,
        easing
      }
    });
    anims.push(anim);
  });
  paths.forEach((path, i) => {
    anim = anime({
      targets: path,
      d: {
        value: values[i],
        duration: 600,
        easing
      }
    });
    anims.push(anim);
  });
  // Big icon
  anim = anime({
    targets: '.icon-big',
    scale: {
      value: expand ? 0.55 : 1,
      duration: 600,
      easing
    },
    translateY: {
      value: expand ? -80 : 0,
      duration: 600,
      easing
    }
  });
  anims.push(anim);
  anim = anime({
    targets: '.path1',
    d: {
      value: expand ? "m 75,75 c 0,0 -9.089452,-9.462765 -15,-15 -5.910548,-5.537235 -15.179982,-15.179982 -20,-20 -4.820018,-4.820018 -11.961819,-11.961819 -15,-15" : "m 45.159681,28.081337 c 0,0 -1.002704,-1.45879 -0.998004,-3.118762 0.0047,-1.659972 1.663447,-2.919913 1.746507,-4.303892 0.08306,-1.383979 -0.25964,-2.527362 -1.18513,-4.179142",
      duration: 400,
      delay: expand ? 200 : 0,
      easing
    }
  });
  anims.push(anim);
  anim = anime({
    targets: '.path2',
    d: {
      value: expand ? "m 75,25 c -6.228628,6.228628 -10.773505,10.773505 -15,15 -4.226495,4.226495 -14.535331,14.535331 -20,20 -5.464669,5.464669 -15,15 -15,15" : "m 44.723054,16.479541 c 0.92549,1.65178 1.268192,2.795163 1.18513,4.179142 -0.08306,1.383979 -1.741801,2.64392 -1.746507,4.303892 -0.0047,1.659972 0.998004,3.118762 0.998004,3.118762",
      duration: 400,
      delay: expand ? 200 : 0,
      easing
    }
  });
  anims.push(anim);
  anim = anime({
    targets: '.path-cup',
    scale: {
      value: expand ? 0 : 1,
      duration: 600,
      easing
    }
  });
  anims.push(anim);
  // Small icons
  anim = anime({
    targets: '.icon',
    scale: {
      value: expand ? 1 : 0,
      duration: 200,
      delay: expand ? 400 : 0,
      easing
    }
  });
  anims.push(anim);
}

button.addEventListener('click', () => {
  if (expanded) {
    animate(from, !expanded);
  } else {
    animate(to, !expanded);
  }

  expanded = !expanded;
})